// =========================
// Particle Background
// =========================
const canvas = document.getElementById("particle-canvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
for (let i = 0; i < 100; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 2 + 1,
    dx: (Math.random() - 0.5) * 1,
    dy: (Math.random() - 0.5) * 1,
  });
}

function animateParticles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue("--accent");
  particles.forEach((p) => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    ctx.fill();

    p.x += p.dx;
    p.y += p.dy;

    if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
    if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
  });
  requestAnimationFrame(animateParticles);
}
animateParticles();

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

// =========================
// Theme Color Switcher
// =========================
const root = document.documentElement;
const savedColor = localStorage.getItem("themeColor");
if (savedColor) {
  root.style.setProperty("--accent", savedColor);
}

document.querySelectorAll(".color-option").forEach(option => {
  option.addEventListener("click", () => {
    const newColor = option.getAttribute("data-color");
    root.style.setProperty("--accent", newColor);
    localStorage.setItem("themeColor", newColor);
  });
});

// =========================
// Language Translations
// =========================
const translations = {
  en: {
    summaryTitle: "ðŸ¦‡ Summary",
    summaryText: "Aspiring AI/ML Engineer specializing in Generative AI, LLMs, and NLP...",
    skillsTitle: "âš¡ Skills",
    experienceTitle: "ðŸ’¼ Experience",
    projectsTitle: "ðŸ’» Projects",
    educationTitle: "ðŸŽ“ Education",
    contactTitle: "ðŸ“¨ Contact",
  },
  es: {
    summaryTitle: "ðŸ¦‡ Resumen",
    summaryText: "Aspirante a Ingeniero de IA/ML especializado en Generative AI, LLMs y NLP...",
    skillsTitle: "âš¡ Habilidades",
    experienceTitle: "ðŸ’¼ Experiencia",
    projectsTitle: "ðŸ’» Proyectos",
    educationTitle: "ðŸŽ“ EducaciÃ³n",
    contactTitle: "ðŸ“¨ Contacto",
  },
  fr: {
    summaryTitle: "ðŸ¦‡ RÃ©sumÃ©",
    summaryText: "Aspirant IngÃ©nieur IA/ML spÃ©cialisÃ© en Generative AI, LLMs et NLP...",
    skillsTitle: "âš¡ CompÃ©tences",
    experienceTitle: "ðŸ’¼ ExpÃ©rience",
    projectsTitle: "ðŸ’» Projets",
    educationTitle: "ðŸŽ“ Ã‰ducation",
    contactTitle: "ðŸ“¨ Contact",
  },
  de: {
    summaryTitle: "ðŸ¦‡ Zusammenfassung",
    summaryText: "Angehender KI/ML-Ingenieur mit Spezialisierung auf Generative AI, LLMs und NLP...",
    skillsTitle: "âš¡ FÃ¤higkeiten",
    experienceTitle: "ðŸ’¼ Erfahrung",
    projectsTitle: "ðŸ’» Projekte",
    educationTitle: "ðŸŽ“ Ausbildung",
    contactTitle: "ðŸ“¨ Kontakt",
  },
  zh: {
    summaryTitle: "ðŸ¦‡ ç®€ä»‹",
    summaryText: "æœ‰å¿—æˆä¸ºAI/MLå·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºŽç”Ÿæˆå¼AIã€å¤§è¯­è¨€æ¨¡åž‹å’Œè‡ªç„¶è¯­è¨€å¤„ç†...",
    skillsTitle: "âš¡ æŠ€èƒ½",
    experienceTitle: "ðŸ’¼ ç»åŽ†",
    projectsTitle: "ðŸ’» é¡¹ç›®",
    educationTitle: "ðŸŽ“ æ•™è‚²",
    contactTitle: "ðŸ“¨ è”ç³»æ–¹å¼",
  }
};

// =========================
// Language Switcher
// =========================
const langSelector = document.getElementById("language-selector");

// Load saved language if available
const savedLang = localStorage.getItem("language");
if (savedLang && translations[savedLang]) {
  langSelector.value = savedLang;
  applyLanguage(savedLang);
}

langSelector.addEventListener("change", (e) => {
  const lang = e.target.value;
  applyLanguage(lang);
  localStorage.setItem("language", lang);
});

function applyLanguage(lang) {
  document.querySelector("#summary h2").textContent = translations[lang].summaryTitle;
  document.querySelector("#summary-text").textContent = translations[lang].summaryText;
  document.querySelector("#skills h2").textContent = translations[lang].skillsTitle;
  document.querySelector("#experience h2").textContent = translations[lang].experienceTitle;
  document.querySelector("#projects h2").textContent = translations[lang].projectsTitle;
  document.querySelector("#education h2").textContent = translations[lang].educationTitle;
  document.querySelector("#contact h2").textContent = translations[lang].contactTitle;
}
